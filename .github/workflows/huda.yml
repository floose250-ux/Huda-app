name: HUDA-CONTENT-V41
on: [push, workflow_dispatch]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: subosito/flutter-action@v2
        with:
          channel: 'stable'
      
      - run: flutter create . --org com.huda.pro.world --project-name huda_pro --overwrite
      
      - run: |
          mkdir -p lib
          cat <<'EOF' > lib/main.dart
          import 'package:flutter/material.dart';

          void main() => runApp(const MaterialApp(home: MainNavigation(), debugShowCheckedModeBanner: false));

          class MainNavigation extends StatefulWidget {
            const MainNavigation({super.key});
            @override _MainNavigationState createState() => _MainNavigationState();
          }

          class _MainNavigationState extends State<MainNavigation> {
            int _idx = 0;
            final List<Widget> _screens = [const HomeScreen(), const QuranIndexScreen(), const AzkarLibraryScreen()];
            @override
            Widget build(BuildContext context) => Scaffold(
              body: _screens[_idx],
              bottomNavigationBar: BottomNavigationBar(
                currentIndex: _idx,
                onTap: (i) => setState(() => _idx = i),
                items: const [
                  BottomNavigationBarItem(icon: Icon(Icons.home), label: 'الرئيسية'),
                  BottomNavigationBarItem(icon: Icon(Icons.menu_book), label: 'المصحف'),
                  BottomNavigationBarItem(icon: Icon(Icons.auto_awesome), label: 'الأذكار'),
                ],
                backgroundColor: const Color(0xFF001F1F),
                selectedItemColor: Colors.amber,
              ),
            );
          }

          // صفحة المصحف - تفعيل سورة الفاتحة
          class QuranIndexScreen extends StatelessWidget {
            const QuranIndexScreen({super.key});
            @override
            Widget build(BuildContext context) => Scaffold(
              backgroundColor: const Color(0xFF000D0D),
              appBar: AppBar(title: const Text('المصحف الشريف'), backgroundColor: const Color(0xFF001F1F)),
              body: ListView(children: [
                ListTile(
                  leading: const CircleAvatar(child: Text('1')),
                  title: const Text('سورة الفاتحة', style: TextStyle(color: Colors.white)),
                  onTap: () => Navigator.push(context, MaterialPageRoute(builder: (c) => const SuraDetailScreen(name: 'الفاتحة'))),
                ),
                const ListTile(title: Text('باقي السور قيد إضافة البيانات...', style: TextStyle(color: Colors.white24))),
              ]),
            );
          }

          class SuraDetailScreen extends StatelessWidget {
            final String name;
            const SuraDetailScreen({super.key, required this.name});
            @override
            Widget build(BuildContext context) => Scaffold(
              backgroundColor: const Color(0xFFF5F5DC),
              appBar: AppBar(title: Text(name), backgroundColor: Colors.teal.shade900),
              body: ListView(padding: const EdgeInsets.all(20), children: const [
                Text("بِسْمِ اللَّهِ الرَّحْمَنِ الرَّحِيمِ (1)", textAlign: TextAlign.center, style: TextStyle(fontSize: 24, fontWeight: FontWeight.bold, color: Colors.black)),
                Text("الْحَمْدُ لِلَّهِ رَبِّ الْعَالَمِينَ (2)", textAlign: TextAlign.center, style: TextStyle(fontSize: 24, fontWeight: FontWeight.bold, color: Colors.black)),
                Text("الرَّحْمَنِ الرَّحِيمِ (3)", textAlign: TextAlign.center, style: TextStyle(fontSize: 24, fontWeight: FontWeight.bold, color: Colors.black)),
              ]),
            );
          }

          // صفحة الأذكار - تفعيل أذكار الصباح
          class AzkarLibraryScreen extends StatelessWidget {
            const AzkarLibraryScreen({super.key});
            @override
            Widget build(BuildContext context) => Scaffold(
              backgroundColor: const Color(0xFF000D0D),
              appBar: AppBar(title: const Text('الأذكار'), backgroundColor: const Color(0xFF001F1F)),
              body: ListTile(
                leading: const Icon(Icons.wb_sunny, color: Colors.orange),
                title: const Text('أذكار الصباح', style: TextStyle(color: Colors.white)),
                onTap: () => Navigator.push(context, MaterialPageRoute(builder: (c) => const AzkarContentScreen())),
              ),
            );
          }

          class AzkarContentScreen extends StatelessWidget {
            const AzkarContentScreen({super.key});
            @override
            Widget build(BuildContext context) => Scaffold(
              backgroundColor: const Color(0xFF000D0D),
              appBar: AppBar(title: const Text('أذكار الصباح')),
              body: ListView(padding: const EdgeInsets.all(15), children: [
                _azkarCard("أصبحنا وأصبح الملك لله والحمد لله"),
                _azkarCard("اللهم بك أصبحنا وبك أمسينا"),
              ]),
            );
            Widget _azkarCard(String text) => Card(
              color: const Color(0xFF001F1F),
              child: Padding(padding: const EdgeInsets.all(20), child: Text(text, textAlign: TextAlign.center, style: const TextStyle(color: Colors.white, fontSize: 18))),
            );
          }

          class HomeScreen extends StatelessWidget {
            const HomeScreen({super.key});
            @override
            Widget build(BuildContext context) => const Scaffold(body: Center(child: Text('مرحباً بك في هدى برو')));
          }
          EOF

      - run: flutter pub get
      - run: flutter build apk --release
      
      - uses: actions/upload-artifact@v4
        with:
          name: HUDA-CONTENT-V41
          path: build/app/outputs/flutter-apk/app-release.apk
