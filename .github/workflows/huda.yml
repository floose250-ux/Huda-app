name: HUDA-VERIFIED-PROHIBITIONS-V44
on: [push, workflow_dispatch]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: subosito/flutter-action@v2
        with:
          channel: 'stable'
      
      - run: flutter create . --org com.huda.pro.world --project-name huda_pro --overwrite
      
      - run: |
          mkdir -p lib
          cat <<'EOF' > lib/main.dart
          import 'package:flutter/material.dart';

          void main() => runApp(const MaterialApp(home: MainNav(), debugShowCheckedModeBanner: false));

          class MainNav extends StatefulWidget {
            const MainNav({super.key});
            @override _MainNavState createState() => _MainNavState();
          }

          class _MainNavState extends State<MainNav> {
            int _idx = 0;
            final List<Widget> _screens = [const HomeScreen(), const QuranIndex(), const SahabaScreen(), const ProhibitionsScreen()];
            @override
            Widget build(BuildContext context) => Scaffold(
              body: _screens[_idx],
              bottomNavigationBar: BottomNavigationBar(
                currentIndex: _idx,
                onTap: (i) => setState(() => _idx = i),
                type: BottomNavigationBarType.fixed,
                backgroundColor: const Color(0xFF001F1F),
                selectedItemColor: Colors.amber,
                unselectedItemColor: Colors.white60,
                items: const [
                  BottomNavigationBarItem(icon: Icon(Icons.home), label: 'الرئيسية'),
                  BottomNavigationBarItem(icon: Icon(Icons.menu_book), label: 'المصحف'),
                  BottomNavigationBarItem(icon: Icon(Icons.people), label: 'الصحابة'),
                  BottomNavigationBarItem(icon: Icon(Icons.warning_amber_rounded), label: 'المحرمات'),
                ],
              ),
            );
          }

          class ProhibitionsScreen extends StatelessWidget {
            const ProhibitionsScreen({super.key});
            
            final List<Map<String, dynamic>> data = const [
              {
                'title': 'الشرك بالله (أكبر الكبائر)',
                'proofs': [
                  'قال ﷺ: "ألا أنبئكم بأكبر الكبائر؟ الإشراك بالله.." (متفق عليه)',
                  'قال ﷺ: "من مات وهو يدعو من دون الله نداً دخل النار" (رواه البخاري)'
                ]
              },
              {
                'title': 'عقوق الوالدين',
                'proofs': [
                  'قال ﷺ: "رضا الرب في رضا الوالد، وسخط الرب في سخط الوالد" (رواه الترمذي)',
                  'قال ﷺ: "لا يدخل الجنة عاق.." (رواه النسائي)'
                ]
              },
              {
                'title': 'الربا وآكل مال اليتيم',
                'proofs': [
                  'قال ﷺ: "اجتنبوا السبع الموبقات.. وأكل الربا، وأكل مال اليتيم" (متفق عليه)',
                  'لعن رسول الله ﷺ آكل الربا وموكله وكاتبه وشاهديه وقال: "هم سواء" (رواه مسلم)'
                ]
              },
              {
                'title': 'الغيبة والنميمة',
                'proofs': [
                  'قال ﷺ: "لا يدخل الجنة نمام" (متفق عليه)',
                  'لما عرج بي مررت بقوم لهم أظفار من نحاس يخمشون وجوههم.. قلت من هؤلاء؟ قال: هؤلاء الذين يأكلون لحوم الناس (رواه أبو داود)'
                ]
              },
              {
                'title': 'الإسبال (للرجال)',
                'proofs': [
                  'قال ﷺ: "ما أسفل من الكعبين من الإزار ففي النار" (رواه البخاري)',
                  'قال ﷺ: "ثلاثة لا يكلمهم الله يوم القيامة.. المسبل إزاره" (رواه مسلم)'
                ]
              }
            ];

            @override
            Widget build(BuildContext context) => Scaffold(
              backgroundColor: const Color(0xFF000D0D),
              appBar: AppBar(title: const Text('المحرمات من السنة الصحيحة'), backgroundColor: const Color(0xFF001F1F)),
              body: ListView.builder(
                itemCount: data.length,
                padding: const EdgeInsets.all(10),
                itemBuilder: (context, i) => Card(
                  color: const Color(0xFF001F1F),
                  margin: const EdgeInsets.only(bottom: 12),
                  child: ExpansionTile(
                    title: Text(data[i]['title'], style: const TextStyle(color: Colors.redAccent, fontWeight: FontWeight.bold)),
                    leading: const Icon(Icons.error_outline, color: Colors.redAccent),
                    children: (data[i]['proofs'] as List<String>).map((p) => Padding(
                      padding: const EdgeInsets.all(15),
                      child: Text(p, textAlign: TextAlign.right, style: const TextStyle(color: Colors.white, fontSize: 16, height: 1.5)),
                    )).toList(),
                  ),
                ),
              ),
            );
          }

          class HomeScreen extends StatelessWidget { const HomeScreen({super.key}); @override Widget build(BuildContext context) => const Center(child: Text('هدى برو')); }
          class QuranIndex extends StatelessWidget { const QuranIndex({super.key}); @override Widget build(BuildContext context) => const Center(child: Text('المصحف')); }
          class SahabaScreen extends StatelessWidget { const SahabaScreen({super.key}); @override Widget build(BuildContext context) => const Center(child: Text('الصحابة')); }
          EOF

      - run: flutter pub get
      - run: flutter build apk --release
      
      - uses: actions/upload-artifact@v4
        with:
          name: HUDA-VERIFIED-PROHIBITIONS-V44
          path: build/app/outputs/flutter-apk/app-release.apk
