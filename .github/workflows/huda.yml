name: HUDA-PRO-FULL-ULTIMATE
on: [push, workflow_dispatch]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: subosito/flutter-action@v2
        with:
          channel: 'stable'
      
      - run: flutter create . --org com.huda.pro.ultimate --project-name huda_pro --overwrite
      
      - run: |
          mkdir -p lib
          cat <<'EOF' > lib/main.dart
          import 'package:flutter/material.dart';

          void main() => runApp(const MaterialApp(home: MainNavigation(), debugShowCheckedModeBanner: false));

          // --- نظام التنقل العالمي ---
          class MainNavigation extends StatefulWidget {
            const MainNavigation({super.key});
            @override _MainNavigationState createState() => _MainNavigationState();
          }

          class _MainNavigationState extends State<MainNavigation> {
            int _idx = 0;
            final List<Widget> _screens = [const HomeScreen(), const QuranIndex(), const MisbahaScreen(), const QiblaScreen(), const AzkarLibrary()];
            @override
            Widget build(BuildContext context) => Scaffold(
              body: _screens[_idx],
              bottomNavigationBar: BottomNavigationBar(
                currentIndex: _idx,
                onTap: (i) => setState(() => _idx = i),
                type: BottomNavigationBarType.fixed,
                backgroundColor: const Color(0xFF001F1F),
                selectedItemColor: Colors.amber,
                unselectedItemColor: Colors.white60,
                items: const [
                  BottomNavigationBarItem(icon: Icon(Icons.home), label: 'الرئيسية'),
                  BottomNavigationBarItem(icon: Icon(Icons.menu_book), label: 'المصحف'),
                  BottomNavigationBarItem(icon: Icon(Icons.fingerprint), label: 'المسبحة'),
                  BottomNavigationBarItem(icon: Icon(Icons.explore), label: 'القبلة'),
                  BottomNavigationBarItem(icon: Icon(Icons.auto_awesome), label: 'الأذكار'),
                ],
              ),
            );
          }

          // --- 1. الشاشة الرئيسية (واجهة عالمية) ---
          class HomeScreen extends StatelessWidget {
            const HomeScreen({super.key});
            @override
            Widget build(BuildContext context) => Scaffold(
              backgroundColor: const Color(0xFF000D0D),
              appBar: AppBar(title: const Text('هدى برو'), centerTitle: true, backgroundColor: Colors.transparent),
              body: ListView(children: [
                _buildCard('مواقيت الصلاة', 'الفجر ٥:١٠ ص', Icons.access_time, Colors.teal),
                _buildCard('آية اليوم', '"فَاذْكُرُونِي أَذْكُرْكُمْ"', Icons.format_quote, Colors.amber),
                _buildCard('تحدي اليوم', 'قراءة سورة الكهف', Icons.star, Colors.purple),
              ]),
            );
            Widget _buildCard(String t, String s, IconData i, Color c) => Container(
              margin: const EdgeInsets.all(15), padding: const EdgeInsets.all(20),
              decoration: BoxDecoration(color: const Color(0xFF001F1F), borderRadius: BorderRadius.circular(20), border: Border.all(color: c.withOpacity(0.3))),
              child: Row(children: [Icon(i, color: c, size: 40), const SizedBox(width: 20), Column(crossAxisAlignment: CrossAxisAlignment.start, children: [Text(t, style: const TextStyle(fontWeight: FontWeight.bold, color: Colors.white)), Text(s, style: const TextStyle(color: Colors.white70))])]),
            );
          }

          // --- 2. المصحف الشريف (الفهرس الكامل + تفاصيل الآيات) ---
          class QuranIndex extends StatelessWidget {
            const QuranIndex({super.key});
            final List<String> surahs = const ['الفاتحة', 'البقرة', 'آل عمران', 'النساء', 'المائدة', 'الأنعام', 'الأعراف', 'الأنفال', 'التوبة', 'يونس', 'هود', 'يوسف', 'الرعد', 'إبراهيم', 'الحجر', 'النحل', 'الإسراء', 'الكهف', 'مريم', 'طه', 'الأنبياء', 'الحج', 'المؤمنون', 'النور', 'الفرقان', 'الشعراء', 'النمل', 'القصص', 'العنكبوت', 'الروم', 'لقمان', 'السجدة', 'الأحزاب', 'سبأ', 'فاطر', 'يس', 'الصافات', 'ص', 'الزمر', 'غافر', 'فصلت', 'الشورى', 'الزخرف', 'الدخان', 'الجاثية', 'الأحقاف', 'محمد', 'الفتح', 'الحجرات', 'ق', 'الذاريات', 'الطور', 'النجم', 'القمر', 'الرحمن', 'الواقعة', 'الحديد', 'المجادلة', 'الحشر', 'الممتحنة', 'الصف', 'الجمعة', 'المنافقون', 'التغابن', 'الطلاق', 'التحريم', 'الملك', 'القلم', 'الحاقة', 'المعارج', 'نوح', 'الجن', 'المزمل', 'المدثر', 'القيامة', 'الإنسان', 'المرسلات', 'النبأ', 'النازعات', 'عبس', 'التكوير', 'الانفطار', 'المطففين', 'الانشقاق', 'البروج', 'الطارق', 'الأعلى', 'الغاشية', 'الفجر', 'البلد', 'الشمس', 'الليل', 'الضحى', 'الشرح', 'التين', 'العلق', 'القدر', 'البينة', 'الزلزلة', 'العاديات', 'القارعة', 'التكاثر', 'العصر', 'الهمزة', 'الفيل', 'قريش', 'الماعون', 'الكوثر', 'الكافرون', 'النصر', 'المسد', 'الإخلاص', 'الفلق', 'الناس'];
            @override
            Widget build(BuildContext context) => Scaffold(
              backgroundColor: const Color(0xFF000D0D),
              appBar: AppBar(title: const Text('فهرس السور'), backgroundColor: const Color(0xFF001F1F)),
              body: ListView.builder(
                itemCount: surahs.length,
                itemBuilder: (context, i) => ListTile(
                  leading: CircleAvatar(child: Text('${i+1}', style: const TextStyle(fontSize: 12))),
                  title: Text(surahs[i], style: const TextStyle(color: Colors.white, fontWeight: FontWeight.bold)),
                  trailing: const Icon(Icons.arrow_forward_ios, size: 14, color: Colors.white24),
                  onTap: () => Navigator.push(context, MaterialPageRoute(builder: (c) => SuraDetails(name: surahs[i]))),
                ),
              ),
            );
          }

          class SuraDetails extends StatelessWidget {
            final String name;
            const SuraDetails({super.key, required this.name});
            @override
            Widget build(BuildContext context) => Scaffold(
              backgroundColor: const Color(0xFFF5F5DC),
              appBar: AppBar(title: Text('سورة $name'), backgroundColor: Colors.teal.shade900, actions: [IconButton(icon: const Icon(Icons.play_arrow), onPressed: (){})]),
              body: ListView(padding: const EdgeInsets.all(20), children: [
                _verseTile(context, "بِسْمِ اللَّهِ الرَّحْمَنِ الرَّحِيمِ (1)", "تفسير: باسم الله نبدأ..", "إعراب: الباء حرف جر..", "معاني: الله: المألوه المعبود.."),
                _verseTile(context, "الْحَمْدُ لِلَّهِ رَبِّ الْعَالَمِينَ (2)", "تفسير: الثناء الكامل لله..", "إعراب: الحمدُ مبتدأ..", "معاني: العالمين: كل ما سوى الله.."),
              ]),
            );
            Widget _verseTile(BuildContext c, String v, String t, String i, String m) => InkWell(
              onTap: () => showModalBottomSheet(context: c, backgroundColor: const Color(0xFF001F1F), builder: (context) => DefaultTabController(length: 3, child: Column(children: [
                const TabBar(tabs: [Tab(text: 'تفسير'), Tab(text: 'إعراب'), Tab(text: 'معاني')], indicatorColor: Colors.amber),
                Expanded(child: TabBarView(children: [Center(child: Text(t)), Center(child: Text(i)), Center(child: Text(m))]))
              ]))),
              child: Padding(padding: const EdgeInsets.symmetric(vertical: 15), child: Text(v, textAlign: TextAlign.center, style: const TextStyle(fontSize: 22, color: Colors.black, fontWeight: FontWeight.bold))),
            );
          }

          // --- 3. المسبحة والموسوعة والقبلة ---
          class MisbahaScreen extends StatefulWidget {
            const MisbahaScreen({super.key});
            @override _MisbahaState createState() => _MisbahaState();
          }
